let e=null;const s=(e,s,t,{template:r,values:a})=>{e.then((e=>{e[s].apply(null,[r].concat(a)).then((e=>{postMessage({id:t,result:e})}),(({message:e})=>{postMessage({id:t,error:e})}))}))};addEventListener("message",(({data:{id:t,action:r,options:a}})=>{switch(r){case"init":return console.log(a.library),e||(e=import(a.library).then((({init:e})=>e(a)))),e.then((()=>postMessage({id:t,result:"OK"})),(({message:e})=>postMessage({id:t,error:e})));case"all":return s(e,"all",t,a);case"get":return s(e,"get",t,a);case"query":return s(e,"query",t,a)}}));